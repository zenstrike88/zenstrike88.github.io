

#<script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/16a48f5d352/bf25108lzj/eb8e96bcb95f32a3_complete.js" crossorigin="anonymous"></script>




<!DOCTYPE html>
<html lang="fr">
<head>
    <script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/16a48f5d352/bf25108lzj/eb8e96bcb95f32a3_complete.js" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <title>Zen Strike | Geo-Observability</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #0f172a; color: white; display: flex; flex-direction: column; height: 100vh; }
        header { padding: 1rem; background: #1e293b; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.3); }
        #main-container { display: flex; flex: 1; overflow: hidden; }
        #sidebar { width: 350px; padding: 2rem; background: #1e293b; border-right: 1px solid #334155; }
        #map { flex: 1; background: #111; }
        select { width: 100%; padding: 12px; border-radius: 8px; background: #334155; color: white; border: 1px solid #475569; margin-bottom: 20px; }
        .stat-card { background: #0f172a; padding: 1rem; border-radius: 10px; margin-top: 20px; border-left: 4px solid #6366f1; }
        .status-online { color: #10b981; font-size: 0.8rem; font-weight: bold; }
    </style>
</head>
<body>

<header>
    <h1>Zen Strike Geo-Monitor</h1>
    <span class="status-online">● DYNATRACE REAL-TIME MONITORING ENABLED</span>
</header>

<div id="main-container">
    <div id="sidebar">
        <h3>Exploration</h3>
        <p style="color: #94a3b8; font-size: 0.9rem;">Sélectionnez un pays pour déclencher une requête XHR et mettre à jour la carte.</p>
        
        <select id="countrySelect">
            <option value="">-- Choisir un pays --</option>
            <option value="Algeria">Algérie</option>
            <option value="France">France</option>
            <option value="Canada">Canada</option>
            <option value="Japan">Japon</option>
            <option value="Brazil">Brésil</option>
        </select>

        <button onclick="calculerTotalInexistant()" style="margin-top:10px; padding:10px; background:#ef4444; color:white; border:none; border-radius:8px; cursor:pointer;">
    Calculer Statistiques (Bouton Erreur)
        </button>

        <div id="details" class="stat-card">
            <strong>Capitale :</strong> <span id="capitale">-</span><br>
            <strong>XHR Status :</strong> <span id="xhr-status">Idle</span>
        </div>
    </div>
    <div id="map"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // Initialisation de la carte
    var map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap'
    }).addTo(map);

    const select = document.getElementById('countrySelect');

    select.addEventListener('change', async (e) => {
        const country = e.target.value;
        if (!country) return;

        document.getElementById('xhr-status').innerText = "Requesting API...";
        document.getElementById('xhr-status').style.color = "#fbbf24";

        try {
            // Cette ligne génère une "XHR Action" dans Dynatrace
            const response = await fetch(`https://restcountries.com/v3.1/name/${country}`);
            const data = await response.json();
            const countryData = data[0];
            const latlng = countryData.latlng;
            const capital = countryData.capital[0];

            // Mise à jour de l'interface
            document.getElementById('capitale').innerText = capital;
            document.getElementById('xhr-status').innerText = "Success (200 OK)";
            document.getElementById('xhr-status').style.color = "#10b981";

            // Animation de la carte
            map.flyTo(latlng, 5);
            L.marker(latlng).addTo(map).bindPopup(`<b>${capital}</b>`).openPopup();

        } catch (error) {
            document.getElementById('xhr-status').innerText = "Error";
            document.getElementById('xhr-status').style.color = "#ef4444";
        }
    });
</script>
</body>
</html>
