

#<script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/16a48f5d352/bf25108lzj/eb8e96bcb95f32a3_complete.js" crossorigin="anonymous"></script>




<!DOCTYPE html>
<html lang="fr">
<head>
    <script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/16a48f5d352/bf25108lzj/eb8e96bcb95f32a3_complete.js" crossorigin="anonymous"></script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zen Strike | Geo-Intelligence</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        :root {
            --bg-dark: #0f172a; --panel-bg: #1e293b; --accent: #6366f1;
            --danger: #ef4444; --warning: #f59e0b; --success: #10b981;
            --text-main: #f8fafc; --text-muted: #94a3b8;
        }

        body { font-family: 'Segoe UI', sans-serif; margin: 0; background: var(--bg-dark); color: var(--text-main); display: flex; flex-direction: column; height: 100vh; }
        header { padding: 1rem 2rem; background: var(--panel-bg); display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(0,0,0,0.5); z-index: 1000; }
        #main-container { display: flex; flex: 1; overflow: hidden; }
        
        /* Sidebar Sombre comme tu l'aimais */
        #sidebar { width: 360px; padding: 1.5rem; background: var(--panel-bg); border-right: 1px solid #334155; overflow-y: auto; }
        
        .section-title { color: var(--accent); text-transform: uppercase; font-size: 0.75rem; font-weight: bold; margin: 1.5rem 0 1rem; display: block; border-bottom: 1px solid #334155; padding-bottom: 5px; }
        #map { flex: 1; background: #ffffff; } /* Map en blanc */

        select { width: 100%; padding: 12px; border-radius: 8px; background: #334155; color: white; border: 1px solid #475569; margin-bottom: 15px; outline: none; }
        
        .btn { width: 100%; padding: 10px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; transition: 0.3s; margin-bottom: 8px; display: flex; align-items: center; justify-content: center; gap: 8px; font-size: 0.85rem; }
        .btn-error { background: var(--danger); color: white; }
        .btn-warn { background: var(--warning); color: #0f172a; }
        .btn-info { background: #38bdf8; color: #0f172a; }

        /* Style des infos pays */
        .stat-card { background: var(--bg-dark); padding: 1.2rem; border-radius: 12px; margin-top: 1rem; border: 1px solid #334155; }
        .data-row { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.9rem; }
        .data-label { color: var(--text-muted); }
        .data-value { color: var(--accent); font-weight: bold; }
        .city-tag { display: inline-block; background: #334155; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; margin: 2px; }
    </style>
</head>
<body>

<header>
    <h1>ZEN STRIKE <span style="font-weight: 300; color: var(--accent);">GEO-MONITOR</span></h1>
    <span style="color: var(--success); font-size: 0.75rem; font-weight: bold;">‚óè DYNATRACE ACTIVE</span>
</header>

<div id="main-container">
    <div id="sidebar">
        
        <span class="section-title">Exploration</span>
        <select id="countrySelect">
            <option value="">-- Choisir un pays --</option>
            <option value="Algeria">Alg√©rie</option>
            <option value="France">France</option>
            <option value="Canada">Canada</option>
            <option value="Japan">Japon</option>
            <option value="Brazil">Br√©sil</option>
        </select>

        <div id="country-info" class="stat-card" style="display:none;">
            <div class="data-row"><span class="data-label">Capitale:</span> <span id="cap-val" class="data-value"></span></div>
            <div class="data-row"><span class="data-label">Population:</span> <span id="pop-val" class="data-value"></span></div>
            <div class="data-row"><span class="data-label">Monnaie:</span> <span id="cur-val" class="data-value"></span></div>
            <div style="margin-top:10px;"><small class="data-label">VILLES CONNUES:</small></div>
            <div id="cities-container" style="margin-top:5px;"></div>
        </div>

        <span class="section-title">Challenge: Errors</span>
        <button onclick="triggerJSException()" class="btn btn-error">üî• Trigger JS Crash</button>
        <button onclick="trigger404()" class="btn btn-error" style="opacity:0.8;">üö´ Force 404 Error</button>

        <span class="section-title">Challenge: Performance</span>
        <button onclick="triggerCPUStress()" class="btn btn-warn">üß† Freeze CPU (3s)</button>
        <button onclick="triggerZombieAPI()" class="btn btn-warn">üßü Zombie XHR</button>

        <div id="details" class="stat-card" style="margin-top: 20px; border-left: 4px solid var(--accent);">
            <small style="color: var(--text-muted)">LOG STATUS</small><br>
            <span id="xhr-status" style="font-size: 0.85rem;">Pr√™t...</span>
        </div>
    </div>

    <div id="map"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    // Configuration des villes principales
    const cityData = {
        "Algeria": ["Alger", "Oran", "Constantine"],
        "France": ["Paris", "Lyon", "Marseille"],
        "Canada": ["Toronto", "Montr√©al", "Vancouver"],
        "Japan": ["Tokyo", "Osaka", "Kyoto"],
        "Brazil": ["S√£o Paulo", "Rio de Janeiro", "Bras√≠lia"]
    };

    // Initialisation Map Blanche (Light Mode)
    var map = L.map('map').setView([20, 0], 2);
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    const statusLabel = document.getElementById('xhr-status');

    document.getElementById('countrySelect').addEventListener('change', async (e) => {
        const country = e.target.value;
        if (!country) return;

        statusLabel.innerText = "Chargement: " + country;
        
        try {
            const res = await fetch(`https://restcountries.com/v3.1/name/${country}`);
            const data = await res.json();
            const c = data[0];

            // Mise √† jour des infos
            document.getElementById('cap-val').innerText = c.capital[0];
            document.getElementById('pop-val').innerText = c.population.toLocaleString();
            document.getElementById('cur-val').innerText = Object.values(c.currencies)[0].name;
            
            // Mise √† jour des villes
            const cityBox = document.getElementById('cities-container');
            cityBox.innerHTML = '';
            cityData[country].forEach(city => {
                cityBox.innerHTML += `<span class="city-tag">${city}</span>`;
            });

            document.getElementById('country-info').style.display = 'block';
            
            // Animation Map
            map.flyTo(c.latlng, 5);
            L.marker(c.latlng).addTo(map).bindPopup(c.capital[0]).openPopup();

        } catch (err) { statusLabel.innerText = "Erreur API"; }
    });

    // Fonctions Stress-Test
    function triggerCPUStress() {
        const start = Date.now();
        while (Date.now() - start < 3000) {}
        statusLabel.innerText = "CPU lib√©r√© (3s)";
    }

    function triggerZombieAPI() {
        statusLabel.innerText = "Requ√™te Zombie en cours...";
        fetch('https://10.255.255.1/timeout', { mode: 'no-cors' }).catch(() => {
            statusLabel.innerText = "Zombie XHR termin√© (Timeout)";
        });
    }

    function triggerJSException() {
        throw new Error("Dynatrace Critical Crash Test");
    }

    function trigger404() {
        fetch('/missing-resource-' + Date.now()).then(r => statusLabel.innerText = "Status: " + r.status);
    }
</script>

</body>
</html>
